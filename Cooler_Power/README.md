# CL-500W 可调电源控制系统

## 项目结构

```
Cooler_Power/
├── config2.yaml              # MetaGPT 配置文件
├── run_agents.py             # MetaGPT 多智能体入口
├── main.py                   # 程序主入口
├── requirements.txt          # 依赖清单
│
├── src/                      # 源代码目录
│   ├── __init__.py
│   │
│   ├── protocol/             # 协议层 (抽象接口)
│   │   ├── __init__.py
│   │   └── power_supply_base.py    # 电源抽象基类
│   │
│   ├── drivers/              # 驱动层 (具体实现)
│   │   ├── __init__.py
│   │   ├── modbus_rtu.py           # MODBUS RTU 协议实现
│   │   └── cl500w_driver.py        # CL-500W 电源驱动
│   │
│   └── ui/                   # 界面层
│       ├── __init__.py
│       └── main_window.py          # Qt 主窗口
│
├── tests/                    # 测试目录
│   ├── test_protocol.py
│   └── test_driver.py
│
└── 开关电源规格书 500W与MODBUS协议.pdf  # 协议文档
```

## 架构设计

```
┌─────────────────────────────────────────────────────────────┐
│                      Qt 界面层 (UI)                          │
│                    main_window.py                            │
└─────────────────────────┬───────────────────────────────────┘
                          │ 调用抽象接口
                          ▼
┌─────────────────────────────────────────────────────────────┐
│                    协议抽象层 (Protocol)                     │
│                  power_supply_base.py                        │
│         PowerSupplyBase (抽象基类，定义统一接口)              │
└─────────────────────────┬───────────────────────────────────┘
                          │ 具体实现
                          ▼
┌─────────────────────────────────────────────────────────────┐
│                     驱动层 (Drivers)                         │
│  ┌──────────────────┐  ┌──────────────────────────────────┐ │
│  │  modbus_rtu.py   │  │      cl500w_driver.py            │ │
│  │  MODBUS协议实现   │◄─│  CL-500W 电源驱动 (继承基类)     │ │
│  └──────────────────┘  └──────────────────────────────────┘ │
└─────────────────────────┬───────────────────────────────────┘
                          │
                          ▼
                    ┌───────────┐
                    │  RS485    │
                    │  硬件接口  │
                    └───────────┘
```

## 运行方式

```bash
# 1. 安装依赖
pip install pyserial PySide6

# 2. 运行多智能体开发 (使用 Python 3.11)
C:\Users\11\AppData\Local\Programs\Python\Python311\python.exe run_agents.py

# 3. 运行主程序
python main.py
```

## 智能体分工

| 智能体 | 模型 | 职责 |
|--------|------|------|
| 协议工程师 | DeepSeek-R1 | 设计协议层和驱动层代码 |
| Qt界面工程师 | Kimi-K2.5 | 设计浅色主题Qt界面 |
| 测试工程师 | DeepSeek-V3 | 综合测试、逻辑验证 |
